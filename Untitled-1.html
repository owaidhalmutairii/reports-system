<!DOCTYPE html>

<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø¥Ø´Ø±Ø§ÙÙŠØ©</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }


    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #1e5a3e 0%, #2d7a54 100%);
        min-height: 100vh;
        padding: 15px;
    }
    
    .container {
        max-width: 900px;
        margin: 0 auto;
    }
    
    .header {
        background: white;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        margin-bottom: 20px;
        text-align: center;
    }
    
    .logo {
        font-size: 22px;
        font-weight: bold;
        color: #1e5a3e;
        margin-bottom: 5px;
    }
    
    .tabs {
        display: flex;
        gap: 8px;
        margin-bottom: 15px;
    }
    
    .tab {
        flex: 1;
        padding: 12px;
        background: white;
        border: none;
        border-radius: 8px;
        font-size: 14px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s;
    }
    
    .tab.active {
        background: #1e5a3e;
        color: white;
    }
    
    .content-area {
        background: white;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        display: none;
    }
    
    .content-area.active {
        display: block;
    }
    
    .form-group {
        margin-bottom: 15px;
    }
    
    .form-label {
        display: block;
        font-weight: bold;
        color: #1e5a3e;
        margin-bottom: 5px;
        font-size: 13px;
    }
    
    .form-input, .form-textarea {
        width: 100%;
        padding: 10px;
        border: 2px solid #ddd;
        border-radius: 6px;
        font-size: 14px;
        font-family: inherit;
    }
    
    .form-textarea {
        min-height: 60px;
        resize: vertical;
    }
    
    .form-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 12px;
        margin-bottom: 20px;
    }
    
    .item-box {
        border: 2px solid #1e5a3e;
        border-radius: 8px;
        padding: 12px;
        margin-bottom: 12px;
        background: #f9fdf9;
    }
    
    .item-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
        gap: 10px;
    }
    
    .item-num {
        background: #1e5a3e;
        color: white;
        width: 28px;
        height: 28px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        flex-shrink: 0;
    }
    
    .item-title {
        flex: 1;
        font-weight: 600;
        color: #1e5a3e;
        font-size: 13px;
    }
    
    .checkbox-group {
        display: flex;
        gap: 15px;
    }
    
    .checkbox-label {
        display: flex;
        align-items: center;
        gap: 5px;
        cursor: pointer;
        font-size: 13px;
    }
    
    .checkbox-label input {
        width: 18px;
        height: 18px;
        cursor: pointer;
    }
    
    .btn {
        padding: 12px 25px;
        border: none;
        border-radius: 8px;
        font-size: 14px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s;
    }
    
    .btn-primary {
        background: #1e5a3e;
        color: white;
    }

    .btn-secondary {
        background: #6c757d;
        color: white;
    }

    .btn-danger {
        background: #dc3545;
        color: white;
    }
    
    .button-group {
        display: flex;
        gap: 10px;
        justify-content: center;
        margin-top: 20px;
    }
    
    .report-card {
        background: #f9fdf9;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 10px;
        border-right: 4px solid #1e5a3e;
        cursor: pointer;
        transition: all 0.3s;
    }
    
    .report-card:hover {
        transform: translateX(-5px);
        box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    }
    
    .report-title {
        font-size: 16px;
        font-weight: bold;
        color: #1e5a3e;
        margin-bottom: 5px;
    }
    
    .report-info {
        font-size: 13px;
        color: #666;
    }
    
    .empty-state {
        text-align: center;
        padding: 40px;
        color: #666;
    }

    .success-msg {
        background: #d4edda;
        color: #155724;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 15px;
        text-align: center;
    }

    .section-title {
        color: #1e5a3e;
        font-size: 18px;
        font-weight: bold;
        margin: 20px 0 15px 0;
        padding-bottom: 8px;
        border-bottom: 2px solid #e8f5e9;
    }
</style>


</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">ğŸ¥ Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø¥Ø´Ø±Ø§ÙÙŠØ©</div>
            <div style="color: #1e5a3e; font-size: 13px; font-weight: 500;">ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØµØ­Ø©</div>
        </div>


    <div class="tabs">
        <button class="tab active" onclick="showPage('new')">ğŸ“ ØªÙ‚Ø±ÙŠØ± Ø¬Ø¯ÙŠØ¯</button>
        <button class="tab" onclick="showPage('list')">ğŸ“Š Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</button>
        <button class="tab" onclick="showPage('settings')">âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
    </div>
    
    <!-- ØªÙ‚Ø±ÙŠØ± Ø¬Ø¯ÙŠØ¯ -->
    <div class="content-area active" id="page-new">
        <h3 class="section-title">ğŸ“‹ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø²ÙŠØ§Ø±Ø© Ø§Ù„Ø¥Ø´Ø±Ø§ÙÙŠØ©</h3>
        
        <div id="successMsg" class="success-msg" style="display: none;">
            âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¨Ù†Ø¬Ø§Ø­!
        </div>

        <form id="reportForm" onsubmit="saveReport(event)">
            <div class="form-grid">
                <div class="form-group">
                    <label class="form-label">Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù *</label>
                    <input type="text" class="form-input" id="inspector" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© / Ø§Ù„Ù‚Ø³Ù… *</label>
                    <input type="text" class="form-input" id="department" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Ø§Ù„ØªØ§Ø±ÙŠØ® *</label>
                    <input type="date" class="form-input" id="date" required>
                </div>
            </div>
            
            <h4 class="section-title">Ø¨Ù†ÙˆØ¯ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</h4>
            
            <div id="itemsContainer"></div>
            
            <div class="button-group">
                <button type="submit" class="btn btn-primary">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
                <button type="button" class="btn btn-secondary" onclick="resetForm()">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø©</button>
            </div>
        </form>
    </div>
    
    <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± -->
    <div class="content-area" id="page-list">
        <h3 class="section-title">ğŸ“Š Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©</h3>
        <div id="reportsList"></div>
    </div>
    
    <!-- Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
    <div class="content-area" id="page-settings">
        <h3 class="section-title">âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h3>
        
        <div class="form-group">
            <label class="form-label">Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù </label>
            <input type="text" class="form-input" id="userName">
        </div>
        
        <div class="form-group">
            <label class="form-label">Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©</label>
            <input type="text" class="form-input" id="defaultDept">
        </div>
        
        <div class="button-group">
            <button class="btn btn-primary" onclick="saveSettings()">ğŸ’¾ Ø­ÙØ¸</button>
        </div>
    </div>
</div>

<div style="text-align: center; padding: 20px; color: white; font-size: 12px; margin-top: 20px;">
    <p style="margin-bottom: 5px;">ØªØ·ÙˆÙŠØ± ÙˆØªØµÙ…ÙŠÙ…: owaidh thamer </p>
    <p style="font-size: 11px; opacity: 0.8;">Â© 2025 Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
</div>

<script>
    const items = [
        'Ù†Ø¸Ø§ÙØ© Ù…Ù…Ø±Ø§Øª Ø§Ù„Ù‚Ø³Ù…',
        'Ù†Ø¸Ø§ÙØ© Ø¯ÙˆØ±Ø§Øª Ø§Ù„Ù…ÙŠØ§Ù‡ ÙÙŠ Ø§Ù„Ù‚Ø³Ù…',
        'Ù†Ø¸Ø§ÙØ© ØºØ±ÙØ© ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ø®Ø¯Ù…Ø© ÙÙŠ Ø§Ù„Ù‚Ø³Ù… (Ø§Ù„Ø³Ø·Ø­)',
        'ØªÙˆÙØ± Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØµØ­ÙŠØ© (ØµØ§Ø¨ÙˆÙ† - Ù…Ù†Ø´ÙØ§Øª ÙŠØ¯ÙŠÙ† - Ø§Ù„Ø®)',
        'Ù†Ø¸Ø§ÙØ© Ø§Ù„Ø£Ø«Ø§Ø« ÙˆØ§Ù„Ù…ÙƒØ§ØªØ¨',
        'Ù†Ø¸Ø§ÙØ© Ø§Ù„Ù‚Ø³Ù… Ø¨Ø´ÙƒÙ„ Ø¹Ø§Ù…',
        'Ø¥Ø¶Ø§Ø¡Ø© Ø§Ù„Ù‚Ø³Ù… ØªØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ø¬ÙŠØ¯',
        'Ø§Ù„ØªÙƒÙŠÙŠÙ ÙŠØ¹Ù…Ù„ Ø¨ÙƒÙØ§Ø¡Ø©',
        'Ø§Ù„ØªØ²Ø§Ù… Ø§Ù„Ø¹Ø§Ù…Ù„ÙŠÙ† Ø¨Ø§Ù„Ø²ÙŠ Ø§Ù„Ø±Ø³Ù…ÙŠ ÙˆØ­Ù…Ù„ Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„',
        'Ù…Ø®Ø±Ø¬ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ ØªØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ø¬ÙŠØ¯',
        'Ù‡Ù„ ØªÙˆØ¬Ø¯ Ø¹ÙˆØ§Ø¦Ù‚ Ø¨Ù…Ù…Ø±Ø§Øª Ø§Ù„Ø·ÙˆØ§Ø±Ø¦',
        'Ù‡Ù„ ØªÙˆØ¬Ø¯ Ù„ÙˆØ­Ø§Øª Ø¥Ø±Ø´Ø§Ø¯ÙŠØ© Ù„Ù…Ø®Ø§Ø±Ø¬ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦',
        'ØµÙŠØ§Ù†Ø© Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø¹Ø§Ù…Ø© (Ø¯Ù‡Ø§Ù† - Ù†Ø¬Ø§Ø±Ø© - Ø§Ù„Ø®)'
    ];

    window.onload = function() {
        createItems();
        loadSettings();
        setToday();
        setupCheckboxes();
    };

    function createItems() {
        const container = document.getElementById('itemsContainer');
        let html = '';
        
        items.forEach((item, i) => {
            const num = i + 1;
            html += `
                <div class="item-box">
                    <div class="item-header">
                        <div class="item-num">${num}</div>
                        <div class="item-title">${item}</div>
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="item${num}" value="yes"> Ù†Ø¹Ù…
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="item${num}" value="no"> Ù„Ø§
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</label>
                        <textarea class="form-textarea" id="notes${num}"></textarea>
                    </div>
                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px;">
                        <div>
                            <label class="form-label">ğŸ“¸ ØµÙˆØ±Ø© Ù‚Ø¨Ù„:</label>
                            <input type="file" accept="image/*" id="imgBefore${num}" style="width:100%;padding:8px;border:2px dashed #1e5a3e;border-radius:6px;font-size:12px;">
                        </div>
                        <div>
                            <label class="form-label">ğŸ“¸ ØµÙˆØ±Ø© Ø¨Ø¹Ø¯:</label>
                            <input type="file" accept="image/*" id="imgAfter${num}" style="width:100%;padding:8px;border:2px dashed #1e5a3e;border-radius:6px;font-size:12px;">
                        </div>
                    </div>
                </div>
            `;
        });
        
        container.innerHTML = html;
    }

    function setupCheckboxes() {
        setTimeout(() => {
            for (let i = 1; i <= 13; i++) {
                const boxes = document.querySelectorAll(`input[name="item${i}"]`);
                boxes.forEach(box => {
                    box.addEventListener('change', function() {
                        if (this.checked) {
                            boxes.forEach(b => {
                                if (b !== this) b.checked = false;
                            });
                        }
                    });
                });
            }
        }, 100);
    }

    function showPage(page) {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.content-area').forEach(c => c.classList.remove('active'));
        
        event.target.classList.add('active');
        document.getElementById('page-' + page).classList.add('active');
        
        if (page === 'list') loadReports();
    }

    function saveReport(e) {
        e.preventDefault();
        
        const reportItems = [];
        for (let i = 1; i <= 13; i++) {
            const checked = document.querySelector(`input[name="item${i}"]:checked`);
            const imgBefore = document.getElementById(`imgBefore${i}`).files[0];
            const imgAfter = document.getElementById(`imgAfter${i}`).files[0];
            
            const item = {
                number: i,
                title: items[i-1],
                result: checked ? (checked.value === 'yes' ? 'âœ“ Ù†Ø¹Ù…' : 'âœ— Ù„Ø§') : 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',
                notes: document.getElementById(`notes${i}`).value,
                images: {
                    before: null,
                    after: null
                }
            };
            
            // ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙˆØ± Ø¥Ù„Ù‰ base64
            if (imgBefore) {
                const reader = new FileReader();
                reader.readAsDataURL(imgBefore);
                reader.onload = function() {
                    item.images.before = reader.result;
                };
            }
            
            if (imgAfter) {
                const reader = new FileReader();
                reader.readAsDataURL(imgAfter);
                reader.onload = function() {
                    item.images.after = reader.result;
                };
            }
            
            reportItems.push(item);
        }

        const report = {
            id: Date.now(),
            inspector: document.getElementById('inspector').value,
            department: document.getElementById('department').value,
            date: document.getElementById('date').value,
            items: reportItems,
            createdAt: new Date().toISOString()
        };

        // ØªØ£Ø®ÙŠØ± Ø¨Ø³ÙŠØ· Ù„Ø¶Ù…Ø§Ù† ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±
        setTimeout(() => {
            let reports = JSON.parse(localStorage.getItem('moh_reports') || '[]');
            reports.unshift(report);
            localStorage.setItem('moh_reports', JSON.stringify(reports));

            document.getElementById('successMsg').style.display = 'block';
            setTimeout(() => {
                document.getElementById('successMsg').style.display = 'none';
                resetForm();
                setTimeout(() => showPageDirect('list'), 1000);
            }, 2000);
        }, 500);
    }

    function showPageDirect(page) {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.content-area').forEach(c => c.classList.remove('active'));
        
        document.querySelector(`[onclick="showPage('${page}')"]`).classList.add('active');
        document.getElementById('page-' + page).classList.add('active');
        
        if (page === 'list') loadReports();
    }

    function resetForm() {
        document.getElementById('reportForm').reset();
        loadSettings();
        setToday();
    }

    function loadReports() {
        const list = document.getElementById('reportsList');
        const reports = JSON.parse(localStorage.getItem('moh_reports') || '[]');

        if (reports.length === 0) {
            list.innerHTML = '<div class="empty-state"><div style="font-size:40px;margin-bottom:10px;">ğŸ“‹</div><p>Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙ‚Ø§Ø±ÙŠØ±</p></div>';
            return;
        }

        let html = '';
        reports.forEach((r, i) => {
            html += `
                <div class="report-card" onclick="viewReport(${i})">
                    <div class="report-title">ğŸ“„ ${r.department}</div>
                    <div class="report-info">ğŸ“… ${r.date} | ğŸ‘¤ ${r.inspector}</div>
                </div>
            `;
        });

        list.innerHTML = html;
    }

    function viewReport(index) {
        const reports = JSON.parse(localStorage.getItem('moh_reports') || '[]');
        const r = reports[index];
        
        let html = `
            <h3 class="section-title">ğŸ“„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±</h3>
            <div style="background:#f9fdf9;padding:12px;border-radius:8px;margin-bottom:15px;">
                <p><strong>Ø§Ù„Ù…Ø´Ø±Ù:</strong> ${r.inspector}</p>
                <p><strong>Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©:</strong> ${r.department}</p>
                <p><strong>Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> ${r.date}</p>
            </div>
            <h4 class="section-title">Ø§Ù„Ù†ØªØ§Ø¦Ø¬</h4>
        `;

        r.items.forEach(item => {
            const color = item.result.includes('Ù†Ø¹Ù…') ? '#155724' : item.result.includes('Ù„Ø§') ? '#721c24' : '#666';
            html += `
                <div class="item-box">
                    <div class="item-header">
                        <div class="item-num">${item.number}</div>
                        <div class="item-title">${item.title}</div>
                        <div style="font-weight:bold;color:${color};font-size:13px;">${item.result}</div>
                    </div>
                    ${item.notes ? `<div style="background:white;padding:10px;border-radius:6px;margin-top:8px;"><strong>Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</strong> ${item.notes}</div>` : ''}
                    ${item.images && (item.images.before || item.images.after) ? `
                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px;">
                        ${item.images.before ? `<div><strong style="font-size:12px;">ğŸ“¸ ØµÙˆØ±Ø© Ù‚Ø¨Ù„:</strong><br><img src="${item.images.before}" style="width:100%;border-radius:8px;margin-top:5px;border:2px solid #1e5a3e;"></div>` : '<div></div>'}
                        ${item.images.after ? `<div><strong style="font-size:12px;">ğŸ“¸ ØµÙˆØ±Ø© Ø¨Ø¹Ø¯:</strong><br><img src="${item.images.after}" style="width:100%;border-radius:8px;margin-top:5px;border:2px solid #1e5a3e;"></div>` : '<div></div>'}
                    </div>
                    ` : ''}
                </div>
            `;
        });

        html += `
            <div class="button-group">
                <button class="btn btn-secondary" onclick="loadReports()">â†©ï¸ Ø±Ø¬ÙˆØ¹</button>
                <button class="btn btn-danger" onclick="deleteReport(${index})">ğŸ—‘ï¸ Ø­Ø°Ù</button>
            </div>
        `;

        document.getElementById('reportsList').innerHTML = html;
    }

    function deleteReport(index) {
        if (!confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„ØªÙ‚Ø±ÙŠØ±ØŸ')) return;
        
        let reports = JSON.parse(localStorage.getItem('moh_reports') || '[]');
        reports.splice(index, 1);
        localStorage.setItem('moh_reports', JSON.stringify(reports));
        loadReports();
    }

    function saveSettings() {
        localStorage.setItem('moh_userName', document.getElementById('userName').value);
        localStorage.setItem('moh_defaultDept', document.getElementById('defaultDept').value);
        alert('âœ… ØªÙ… Ø§Ù„Ø­ÙØ¸');
        loadSettings();
    }

    function loadSettings() {
        const name = localStorage.getItem('moh_userName') || '';
        const dept = localStorage.getItem('moh_defaultDept') || '';
        
        document.getElementById('userName').value = name;
        document.getElementById('defaultDept').value = dept;
        document.getElementById('inspector').value = name;
        document.getElementById('department').value = dept;
    }

    function setToday() {
        document.getElementById('date').value = new Date().toISOString().split('T')[0];
    }
</script>


</body>
</html>